# Vello Upstream Reference Images

Reference images from the upstream Vello project (linebender/vello) used as
ground truth for TileRasterizer validation.

## Source

Images copied from `sparse_strips/vello_sparse_tests/snapshots/` in the
upstream Vello repository. These are generated by Vello's sparse strips CPU
rendering pipeline — the closest match to our TileRasterizer implementation.

Note: Vello smoke test snapshots (`vello_tests/snapshots/smoke/`) use a
different rendering pipeline (GPU compute) with BLACK background and are
not directly comparable.

## Test Scenes

| File | Shape | Size | Color | Fill Rule | Threshold |
|------|-------|------|-------|-----------|-----------|
| `filled_circle.png` | Circle(50,50) r=45 | 100x100 | LIME #00FF00 | NonZero | 5.0% |
| `filled_triangle.png` | Triangle (5,5)→(95,50)→(5,95) | 100x100 | LIME #00FF00 | NonZero | 5.0% |
| `filling_nonzero_rule.png` | 5-point star | 100x100 | MAROON #800000 | NonZero | 10.0% |
| `filling_evenodd_rule.png` | 5-point star | 100x100 | MAROON #800000 | EvenOdd | 10.0% |

All images: WHITE background (#FFFFFF), RGBA8 format.

## Running Tests

```bash
cd gg
go test -v -run TestVelloAgainstUpstream ./internal/gpu/...
```

## Current Results (2026-02-24)

| Scene | Diff | Status |
|-------|------|--------|
| filled_circle | 3.64% | PASS |
| filled_triangle | 3.20% | PASS |
| filling_nonzero_rule | 6.63% | PASS |
| filling_evenodd_rule | 8.65% | PASS |

Differences are expected due to:
- Curve flattening tolerance differences (our EdgeBuilder vs Vello's flatten)
- Fixed-point quantization in edge processing pipeline
- Tile boundary handling differences

## Upstream References

- Test code: `sparse_strips/vello_sparse_tests/tests/basic.rs`
- Snapshot infra: `vello_tests/src/snapshot.rs`
- kurbo shapes: Circle, BezPath (triangle, star)
- kappa constant: 0.5522847498 (same as gg/scene/path.go)

---

*Created: 2026-02-24 (GG-AA-021)*
